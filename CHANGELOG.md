# 更新日志

## 2025-10-24

### ✨ 新功能

#### 1. MCQ 后台默认显示 4 个选项
- **修改文件**: `mcq/admin.py`
- **改进内容**: 
  - 在后台添加听力选择题时，默认显示 4 个空白选项表单（A、B、C、D）
  - 选项标签会自动分配为 A、B、C、D
  - 管理员只需填写选项内容并勾选正确答案即可

#### 2. 增强试题模块管理功能
- **修改文件**: `exam/admin.py`, `mcq/admin.py`
- **改进内容**:
  
##### ExamModule（试题模块）后台管理增强:
  - ✅ 根据模块类型显示对应题库的所有试题
  - ✅ 在详情页直接查看已关联的试题列表（最多显示 20 条）
  - ✅ 快速跳转到题目编辑页面
  - ✅ 提供"查看所有关联题目"和"添加新题目"的快捷按钮
  - ✅ 显示关联题目数量统计
  - ✅ 时长显示优化（自动转换为秒/分钟）

##### 支持的模块类型:
  - **LISTENING_MCQ (听力理解)**: 显示所有 MCQ 听力选择题
  - **STORY_RETELL (故事复述)**: 显示所有复述题目
  - **LISTENING_SA (听力简答)**: 显示所有听力简答对话
  - **OPI (口语面试)**: 显示所有 OPI 话题
  - **ATC_SIM (模拟通话)**: 显示所有 ATC 场景

##### McqQuestion（听力选择题）后台管理增强:
  - ✅ 新增"关联模块"列表显示
  - ✅ 支持按模块筛选题目
  - ✅ 在题目详情页可以直接选择关联的试题模块（支持多选）

### 📝 使用说明

#### 如何构建试题模块：

1. **创建试题模块**:
   - 进入后台 → 试题模块 → 添加
   - 填写标题、选择模块类型、设置时长和分数
   - 保存

2. **关联试题**:
   有两种方式可以关联试题：

   **方式一：从模块管理页面关联**
   - 编辑已创建的试题模块
   - 在"关联试题"区域，查看当前已关联的题目
   - 点击"查看所有关联题目"按钮，进入题目筛选页面
   - 点击"添加新题目"按钮，创建新题目并关联到该模块

   **方式二：从题目管理页面关联**
   - 进入对应类型的题目管理页面（如：听力选择题）
   - 编辑或创建题目
   - 在"关联模块"区域，使用水平过滤器选择要关联的模块（可多选）
   - 保存

3. **查看模块题目**:
   - 在试题模块详情页，可以看到：
     - 已关联题目的数量
     - 题目列表（显示 ID、标题、编辑链接）
     - 快速跳转到题目管理的按钮

### 🎯 优化效果

- **提高效率**: 减少重复操作，一次性显示所有需要的表单
- **更直观**: 清晰展示模块与题目的关联关系
- **易于管理**: 提供快捷链接，方便在不同管理页面间跳转
- **灵活组卷**: 支持一道题目关联到多个模块，方便题目复用

